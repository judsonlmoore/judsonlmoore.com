<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Site Icon -->
        <link rel="icon" href="/assets/images/favicon.png" />

        <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Checkout | Judson L Moore</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Checkout" />
<meta name="author" content="judsonlmoore" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Author and travel addict" />
<meta property="og:description" content="Author and travel addict" />
<link rel="canonical" href="http://localhost:4000/checkout/" />
<meta property="og:url" content="http://localhost:4000/checkout/" />
<meta property="og:site_name" content="Judson L Moore" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Checkout" />
<meta name="twitter:site" content="@judsonlmoore" />
<meta name="twitter:creator" content="@judsonlmoore" />
<meta property="fb:app_id" content="611458568990674" />
<script type="application/ld+json">
{"description":"Author and travel addict","author":{"@type":"Person","name":"judsonlmoore"},"@type":"WebPage","url":"http://localhost:4000/checkout/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/jlm-logo-full-bw-dark.png"},"name":"judsonlmoore"},"headline":"Checkout","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


        <!-- Site CSS -->
        <link rel="stylesheet" href="/assets/main.css">

        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/d4658f2d4a.js" crossorigin="anonymous" integrity="sha384-TDhFdBCp6zkFoOxFg2XaOsN4rWmrP4Tbzzaz0VKFgnk4mENBCgpW6mG7kamM0Yvy"></script>

    </head>

     
    <body class="layout-shop">
        <!-- defer loading of font and font awesome -->
        <noscript id="deferred-styles">
            <link
                href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i"
                rel="stylesheet"
            />
            <link
                rel="stylesheet"
                src="/assets/css/all.min.css"
                crossorigin="anonymous"
            />         
        </noscript>

        <!-- Begin Menu Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark nav-down mb-0">
    <div class="container p-0">
        <!-- Begin Logo -->
        <a class="navbar-brand" href="/">
            <p class="h4 font-weight-light">Judson L Moore</p>
            <p class="h5 font-weight-lighter">Author and travel addict</p>
        </a>
        <!-- End Logo -->

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav-main" aria-controls="nav-main" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="nav-main">

            <ul class="navbar-nav ml-auto">     
                
                
                <li class="nav-item dropdown my-2 my-lg-0">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Asia
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <a class="dropdown-item" href="/india/">India</a>
                    
                        <a class="dropdown-item" href="/kyrgyzstan/">Kyrgyzstan</a>
                    
                    </div>
                </li>
                
                
                
                <li class="nav-item dropdown my-2 my-lg-0">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Europe
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <a class="dropdown-item" href="/england/">England</a>
                    
                        <a class="dropdown-item" href="/germany/">Germany</a>
                    
                        <a class="dropdown-item" href="/switzerland/">Switzerland</a>
                    
                        <a class="dropdown-item" href="/turkey/">Turkey</a>
                    
                    </div>
                </li>
                
                
                
                <li class="nav-item dropdown my-2 my-lg-0">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        MENA
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <a class="dropdown-item" href="/egypt/">Egypt</a>
                    
                        <a class="dropdown-item" href="/morocco/">Morocco</a>
                    
                        <a class="dropdown-item" href="/uae/">United Arab Emirates</a>
                    
                    </div>
                </li>
                
                
                
                <li class="nav-item dropdown my-2 my-lg-0">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Americas
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    
                        <a class="dropdown-item" href="/brazil/">Brazil</a>
                    
                        <a class="dropdown-item" href="/colombia/">Colombia</a>
                    
                        <a class="dropdown-item" href="/usa/">United States of America</a>
                    
                    </div>
                </li>
                
                
                
                <li class="nav-item my-2 my-lg-0">
                    <a class="nav-link" href="/lifestyle/">Lifestyle</a>
                </li>
                
                
                
                <li class="nav-item my-2 my-lg-0">
                    <a class="nav-link" href="/female-travel/">Female Travel</a>
                </li>
                
                
                
                <li class="nav-item my-2 my-lg-0">
                    <a class="nav-link" href="/book/">Book <span class="badge badge-info">New</span></a>
                </li>
                
                
            </ul>

            <div class="row d-lg-none py-2 my-4 border-top border-bottom border-light">
                <div class="col">
                    
<!--facebook -->
<a href="https://facebook.com/judsonlmooreblog/" class="btn bg-blue text-light mr-2" alt="Follow on facebook" target="_blank">
	<span class="fab fa-facebook"></span>
</a>

<!--twitter -->
<a href="https://twitter.com/judsonlmoore/" class="btn bg-blue text-light mr-2" alt="Follow on twitter" target="_blank">
	<span class="fab fa-twitter"></span>
</a>

<!--instagram -->
<a href="https://instagram.com/judsonlmoore/" class="btn bg-blue text-light mr-2" alt="Follow on instagram" target="_blank">
	<span class="fab fa-instagram"></span>
</a>

<!--linkedin -->
<a href="https://www.linkedin.com/in/judsonlmoore/" class="btn bg-blue text-light mr-2" alt="Follow on linkedin" target="_blank">
	<span class="fab fa-linkedin"></span>
</a>

<!--github -->
<a href="https://github.com/judsonlmoore/" class="btn bg-blue text-light mr-2" alt="Follow on github" target="_blank">
	<span class="fab fa-github"></span>
</a>

<!--amazon -->
<a href="https://www.amazon.com/author/judsonlmoore" class="btn bg-blue text-light mr-2" alt="Follow on amazon" target="_blank">
	<span class="fab fa-amazon"></span>
</a>

                </div>
            </div>

            <div class="row d-lg-none my-2 my-lg-0">
                <div class="col">
                    <script src="/assets/js/lunr.js"></script>
<style>
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>
<form class="bd-search" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
    <input type="text" class="form-control text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."/>
</form>
<div id="lunrsearchresults">
    <ul></ul>
</div>
<script src="/assets/js/lunrsearchengine.js"></script>
                </div>
            </div>

        </div>
    </div>
</nav>

        <!-- End Navigation -->

        <!-- Begin Content -->
        <div class="container mt-3 mt-md-5">

    <section>

        <div class="article-post">
            <p>Fill the form below and press the ‘Proceed to payment’ button.</p>

<p><br /></p>

<style>
    .radio, .checkbox {position: relative; bottom: 8px;}
    .rowradio + .rowradio .radio {margin-top: 0px;}
    input[type="checkbox"], input[type="radio"] {position: relative; bottom: 1px;}
    input[type='number'] {-moz-appearance: textfield;}
    input::-webkit-outer-spin-button, input::-webkit-inner-spin-button {-webkit-appearance: none;}
    select.form-control {-webkit-appearance: none; -moz-appearance: none; appearance: none; background: url("/img/chevron_down.svg") calc(100% - 17px) 60% no-repeat; background-size: auto 11px;}
    select.form-control::-ms-expand {display: none;}
</style>

<div class="row">
    <div class="col-md-8">

        <form id="checkoutform" class="form autofill" method="POST" action="http://formspree.io/jhvanderschee@gmail.com" onsubmit="return submitcheckout(event)">
            <input name="_next" value="http://localhost:4000" type="hidden" />
            <input name="_gotcha" style="display:none" type="text" />
            <input name="_subject" value="New submission!" type="hidden" />
            <div class="row form-group">
                <div class="col-sm-6">
                    <label for="firstname">First name*</label>
                    <input name="first-name" id="firstname" class="form-control" required="" type="text" />
                </div>
                <div class="col-sm-6">
                    <label for="lastname">Last name*</label>
                    <input name="last-name" id="lastname" class="form-control" required="" type="text" />
                </div>
            </div>
            <div class="row form-group">
                <div class="col-sm-12">
                    <label for="email">Email address*</label>
                    <input name="email-address" id="email" class="form-control" required="" type="email" />
                </div>
            </div>
            <div class="row form-group">
                <div class="col-sm-12">
                    <label for="address">Address*</label>
                    <input name="address" id="address" class="form-control" required="" type="text" />
                </div>
            </div>
            <div class="row form-group">
                    <div class="col-sm-6">
                        <label for="city">City*</label>
                        <input name="city" id="city" class="form-control" required="" type="text" />
                    </div>
                    <div class="col-sm-6">
                        <label for="postalcode">Postal code*</label>
                        <input name="postal-code" id="postalcode" class="form-control" required="" type="text" />
                    </div>
            </div>
            <div class="row rowradio">
                <div class="col-sm-12">
                    <div class="radio">
                        <label><input type="radio" name="wrapped" value="no" required="" /> Not gift wrapped</label>
                    </div>
                </div>
            </div>
            <div class="row rowradio">
                <div class="col-sm-12">
                    <div class="radio">
                        <label><input type="radio" name="wrapped" value="yes" price="2" description="Gift wrapped" required="" /> Gift wrapped (+ &euro; 2.00)</label>
                    </div>
                </div>
            </div>
            <div class="row form-group">
                <div class="col-sm-12">
                    <label for="message">Message</label>
                    <textarea name="message" id="message" cols="30" rows="10" class="form-control"></textarea>
                </div>
            </div>
            <div class="row rowcheckbox">
                <div class="col-sm-12">
                    <div class="checkbox">
                        <label><input name="terms" value="I accept the terms and conditions" required="" type="checkbox" />I accept the <a href="/terms" class="gray" target="blank">terms and conditions</a></label>
                    </div>
                </div>
            </div>
            <div class="form-group" style="text-align: right;">
                <a href="/cart" class="btn btn-secondary" style="border-color: transparent!important; text-decoration: underline!important;">Back</a> &nbsp;&nbsp; <input value="Proceed to payment" class="btn btn-primary" type="submit" />
            </div>
        </form>

    </div>
    <div class="col-md-4">
        <label>Payment total</label>
        <div class="well" style="max-width: 550px;">
            <div id="checkoutcalc" style="text-align: right;"></div>
        </div>

        <em>Payments are 100% secure and will be handled by Mollies Paylink service, called Plink. In the next screen you will be redirected to a secure checkout process on useplink.com.</em>
    </div>
</div>

<div style="margin-top: 50px; max-width: 550px; position: relative; top: 30px;">
    <ul id="checkout_progress">
        <li class="past"><span><a href="/cart">Shopping cart</a></span></li><li class="current"><span><a href="#">Checkout</a></span></li><li><span><span>Payment</span></span></li>
    </ul>   
</div>

        </div>

    </section>

</div> <!-- container -->
        <!-- End Content -->

        <!-- Begin Footer -->
        <!-- Footer -->
<footer class="page-footer d-none d-lg-block bg-dark text-light py-3 mt-5">

  <!-- Footer Links -->
  <div class="container text-center text-md-left mt-5">

    <!-- Grid row -->
    <div class="row mt-3">

		<!-- Grid column -->
		<div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">

	        <!-- Content -->
	        <h6 class="text-uppercase font-weight-bold">Affiliate Links</h6>
	        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
	        <p>This site contains affiliate links. In plain English, this means that I may receive a small commission (at no cost to you) if you subscribe or purchase something through the links provided. You will never see me post a link to a product or service that I haven’t used myself and love! (<a href="/disclosures/">Learn more here</a>)</p>

		</div>
		<!-- Grid column -->

		<!-- Grid column -->
		<div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">

	        <h6 class="text-uppercase font-weight-bold">Top categories</h6>
	        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
	        <p>
	          <a href="/lifestyle/">Lifestyle</a>
	        </p>
	        <p>
	          <a href="/blogroll/">Travel</a>
	        </p>
	        <p>
	          <a href="/career/">Career</a>
	        </p>
	        <p>
	          <a href="/about/">About Me</a>
	        </p>

		</div>
		<!-- Grid column -->

		<!-- Grid column -->
		<div class="col-md-3 col-lg-2 col-xl-2 mx-auto mb-4">

	        <!-- Links -->
	        <h6 class="text-uppercase font-weight-bold">Useful links</h6>
	        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
	        <p>
	          <a href="/mediakit/">Media Kit</a>
	        </p>
	        <p>
	          <a href="/guest-authors/">Guest Authors</a>
	        </p>
	        <p>
	          <a href="/disclosures/">Disclosures</a>
	        </p>
	        <p>
	          <a href="/sitemap_index.xml">Sitemap</a>
	        </p>

		</div>
		<!-- Grid column -->

		<!-- Grid column -->
		<div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">

	        <!-- Links -->
	        <h6 class="text-uppercase font-weight-bold">Contact</h6>
	        <hr class="deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto" style="width: 60px;">
	        <p>
	          <i class="fas fa-home mr-3"></i> Berlin, Germany</p>
	        <p>
	          <i class="fas fa-envelope mr-3"></i> contact@judsonlmoore.com</p>
	        <p>
	          <i class="fas fa-phone mr-3"></i> + 01 310 571 5210</p>
	        <p>
	          <i class="fas fa-print mr-3"></i> + 49 176 640 34811</p>

		</div>
		<!-- Grid column -->

    </div>
    <!-- Grid row -->

</div>
<!-- Footer Links -->

<!-- Copyright -->
<div class="footer-copyright text-center py-3">
Copyright © 2019 <a href="http://localhost:4000">Judson L Moore</a>
</div>
<!-- Copyright -->

</footer>
<!-- Footer -->
        <!-- End Footer -->

        <!-- Scripts -->

        <!-- JQuery -->
        <script src="/assets/vendor/jquery.min.js"></script>

        <!-- Popper JS -->
        <script src="/assets/vendor/popper.min.js"></script>

        <!-- Boostrap JS -->
        <script src="/assets/vendor/bootstrap.min.js"></script>

        <!-- IE 10 Fix -->
        <script src="/assets/js/ie10-viewport-bug-workaround.js"></script>

        <!-- Crisp Chat Application -->
        <script type="text/javascript">window.$crisp=[];window.CRISP_WEBSITE_ID="3d3dd4a9-6976-4ab1-91b8-be385622c5e2";(function(){d=document;s=d.createElement("script");s.src="https://client.crisp.chat/l.js";s.async=1;d.getElementsByTagName("head")[0].appendChild(s);})();</script>

        

        
        <!-- Shop Payment Info -->
        <style>
#checkout_progress {display: block; text-align: center;}
#checkout_progress li {width: 110px; text-align: left; display: inline-block; border-top: 1px solid #dddddd; padding-top: 10px;}
#checkout_progress li.past {border-color: #d9230f;}
#checkout_progress li:last-child {border: 0; width: 55px;}
#checkout_progress li > span > * {
    white-space: nowrap;
    display: inline-block;
    -ms-transform: translateX(-50%); /* IE 9 */
    -webkit-transform: translateX(-50%); /* Chrome, Safari, Opera */
    transform: translateX(-50%);
}
#checkout_progress li > *:before {position: absolute; margin: -16px 0 0 -5px; width: 11px; height: 11px; content: ""; 
    border-radius: 99px; border: 2px solid white; 
    box-shadow: 0px 0px 0.1px 1px #bbb; background: white;
}
#checkout_progress li.past > span:before,
#checkout_progress li.current > span:before {box-shadow: 0px 0px 0.1px 1px #d9230f; background: #d9230f;}
</style>
<script>

function createCookie(name,value,days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days*24*60*60*1000));
        expires = "; expires=" + date.toUTCString();
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}
function eraseCookie(name) {
    createCookie(name,"",-1);
}

var cart_array = [];
var product_array = [];

function submitcheckout(event) {
    event.preventDefault();
    //get all values from the form
    var values = {};
    $.each($('#checkoutform').serializeArray(), function(i, field) {
        var human_label = field.name[0].toUpperCase() + field.name.substring(1).replace(/-/g, " ");
        values[human_label] = field.value;
    });
    //get the products
    if(getParameterByName('paymentlink')) {
        values['Order 1'] = "1 x " + getParameterByName('description') + " (€ " + parseFloat(getParameterByName('price')).toFixed(2) + ")";
        values['Shopping cart'] = parseFloat(getParameterByName('price')).toFixed(2);

    } else {
        var counted_product_array = createcountedproductarray();
        var total = 0;
        for (var i=0; i<counted_product_array.length; i++) {
            var item_array = counted_product_array[i].split('|');
            var item_index = item_array[0];
            var description = item_array[1];
            var price = item_array[2];
            var image = item_array[3];
            var count = item_array[4];
            values['Order '+(i+1)] = count + " x " + description + " (€ " + parseFloat(price).toFixed(2) + ")";
            total = parseFloat(total) + parseFloat((count * price));
        }
        values['Shopping cart'] = parseFloat(total).toFixed(2);
    }
    $('input[price]:checked').each( function() {
        var price = parseFloat($(this).attr('price')).toFixed(2);
        var description = $(this).attr('description');
        values[description] = parseFloat(price).toFixed(2);
    });
    values['Checkout total'] = parseFloat($('#checkouttotal').val()).toFixed(2);


    var ordernumber = new Date().getTime();
    values['Order number'] = ordernumber;
    var price = $('#checkouttotal').val();
    if(getParameterByName('paymentlink')) {
        $.ajax({
            url: "https://formspree.io/you@gmail.com",
            method: "POST",
            data: values,
            dataType: "json",
            success: function(data) {
                window.location.href=getParameterByName('paymentlink');
            }
        });
    } else {
        $.ajax({
            url: "https://formspree.io/you@gmail.com",
            method: "POST",
            data: values,
            dataType: "json",
            success: function(data) {
                window.location.href='https://useplink.com/payment/ssMgtkddEzgC4rKKJJ9T/'+price+'/order:'+ordernumber;
            }
        });       
    }
    return false;
}

function uniq(a) {
    var prims = {"boolean":{}, "number":{}, "string":{}}, objs = [];

    return a.filter(function(item) {
        var type = typeof item;
        if(type in prims)
            return prims[type].hasOwnProperty(item) ? false : (prims[type][item] = true);
        else
            return objs.indexOf(item) >= 0 ? false : objs.push(item);
    });
}

function createcountedproductarray() {
    product_array = unescape(readCookie('productcookie')).split(',');
    cart_array = unescape(readCookie('cartcookie')).split(',');
    var counted_cart_array = [];
    //create counted cart array
    for (var i=0; i<cart_array.length; i++) {
        //check how many times this item exists and add it to the string
        var thiscount = 0;
        for(var j=0;j<cart_array.length;j++){
            if(cart_array[j] == cart_array[i]) thiscount++;
        }
        counted_cart_array.push(cart_array[i]+'|'+thiscount);
    }
    //remove all other occurances of this string
    counted_cart_array = uniq(counted_cart_array);

    var counted_product_array = []
    //replace indexes with product strings (merge product array with counted cart array)
    for (var i=0; i<counted_cart_array.length; i++) {
        var item_array = counted_cart_array[i].split('|');
        var item_count = item_array[1];
        var item_index = item_array[0];
        var product_string = product_array[item_index];
        counted_product_array[i] = item_index + "|" +product_string + "|" + item_count;
    }

    //return counted product array
    return counted_product_array;
}

function updatecart() {
    if(readCookie('cartcookie')) {
        var counted_product_array = createcountedproductarray();

        //toon cart_array
        var total = 0;
        $('tbody > *').remove();
        for (var i=0; i<counted_product_array.length; i++) {
            var item_array = counted_product_array[i].split('|');
            var item_index = item_array[0];
            var description = item_array[1];
            var price = item_array[2];
            var image = item_array[3];
            var count = item_array[4];

            $('tbody').append('<tr><td><img src="https://images.weserv.nl/?url=localhost:4000'+image+'&w=120&h=120&t=square&output=jpg&q=50" /><span>'+description+'<br />&euro; '+price+'<br /><a href="#" class="" onclick="removefromcart(\''+item_index+'\')">remove</a></span></td><td><input type="number" onchange="updateproductamount(\''+item_index+'\',this.value)" class="form-control" value="'+count+'" /></td><td>&euro; '+(count * price).toFixed(2)+'</td></tr>');
            total = parseFloat(total) + parseFloat((count * price));
        }
        $('tbody').append('<tr><td colspan="3" class="carttotal">&euro; '+total.toFixed(2)+'</td></tr>');
        $('#carttotal').remove();
        $('body').append('<input id="carttotal" type="hidden" value="'+total+'" />');
        if(counted_product_array.length>9) $('#cartnumber').show().html("9");
        else $('#cartnumber').show().html(counted_product_array.length);
    } else {
        $('tbody > *').remove();
        $('tbody').append('<tr><td colspan="2">Your cart is currently empty...</td><td></td></tr>');
        $('tbody').append('<tr><td colspan="3" class="carttotal">&euro; 0.00</td></tr>');
        $('body').append('<input id="carttotal" type="hidden" value="0.00" />');
        $('#cartnumber').hide();
    }
    $('#checkoutform').append($('#carttotal'));
    $('#checkoutform').append($('#checkouttotal'));
}

function updateproductamount(item_index,amount){
    //find the index of the productstring
    //var product_array_index = product_array.indexOf(productstring);
    var product_array_index = item_index;

    //calculate diff with cookie
    cart_array = unescape(readCookie('cartcookie')).split(',');

    for (var i=0; i<cart_array.length; i++) {
        if(cart_array[i]==product_array_index) {

            //check how many times this item exists and add it to the string
            var thiscount = 0;
            for(var j=0;j<cart_array.length;j++){
                if(cart_array[j] == cart_array[i]) thiscount++;
            }

            //add items to the cart cookie
            if(thiscount<amount) {
                for (var j=0; j<(amount - thiscount); j++) {
                    cart_array.push(product_array_index);
                    eraseCookie('cartcookie');
                    createCookie('cartcookie',escape(cart_array.join(',')),30);
                }
            }
            //remove items from the cart cookie
            if(thiscount>amount) {
                for (var j=0; j<(thiscount - amount); j++) {
                    var index = cart_array.indexOf(product_array_index.toString());    // <-- Not supported in <IE9
                    if (index !== -1) {
                        cart_array.splice(index, 1);
                    }
                    eraseCookie('cartcookie');
                    createCookie('cartcookie',escape(cart_array.join(',')),30);
                }
            }
            updatecart();
        }  
    }
    $('.cart.table tr:nth-child(1) td:nth-child(2) input').focus();
}


function removefromcart(string) {
    if(readCookie('cartcookie')) {
        cart_array = unescape(readCookie('cartcookie')).split(',');
        //console.log(string);
        cart_array = cart_array.filter(function(item) { 
            return item !== string;
        });
        //console.log(cart_array);
        eraseCookie('cartcookie');
        createCookie('cartcookie',escape(cart_array.join(',')),30);
        updatecart();
    }
}
function isInArray(value, array) {
  return array.indexOf(value) > -1;
}

$('body').on('click', '.addtocart', function() {
    var productstring = $(this).attr('description')+'|'+$(this).attr('price')+'|'+$(this).attr('image');
    //check if product is available in the product_array
    var product_array_index = product_array.indexOf(productstring);
    //if not add product to product_array
    if(product_array_index<0) {
        product_array_index = (product_array.push(productstring) -1);
    }
    //add the index to the cart
    cart_array.push(product_array_index);

    //add the item to the cart
    eraseCookie('cartcookie');
    createCookie('cartcookie',escape(cart_array.join(',')),30);
    eraseCookie('productcookie');
    createCookie('productcookie',escape(product_array.join(',')),30);
    updatecart();
});
$('body').on('click', '.checkout', function(event) {
    $(this).attr('href','/checkout/?paymentlink=&description=Checkout&price=.');
});

$('body').on('click', '.buy', function() {
    var productstring = $(this).attr('description')+'|'+$(this).attr('price')+'|'+$(this).attr('image');
    //check if product is available in the product_array
    var product_array_index = product_array.indexOf(productstring);
    //if not add product to product_array
    if(product_array_index<0) {
        product_array_index = (product_array.push(productstring) -1);
    }
    //clear the cart and add the index
    var cart_array = [product_array_index];

    eraseCookie('cartcookie');
    createCookie('cartcookie',escape(cart_array.join(',')),30);
    eraseCookie('productcookie');
    createCookie('productcookie',escape(product_array.join(',')),30);
    updatecart();
});

function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}

if(getParameterByName('paymentlink')) $('#checkoutform .rowradio').hide();

$('form').change(function() {
    if(getParameterByName('paymentlink')) {
        //hide the progress overview
        $('#checkout_progress').hide();
        //hide the back link
        $('input[type="submit"]').prev().hide();
        //if description is set and price and url, set them:
        var carttotal = parseFloat(getParameterByName('price')).toFixed(2);
        $('#checkoutcalc').html('');
        $('#checkoutcalc').html("<span style='float: left;'>"+getParameterByName('description')+": </span>&euro; "+carttotal);
    } else {
        //otherwise do this:
        var carttotal = parseFloat($('#carttotal').val()).toFixed(2);
        $('#checkoutcalc').html('');
        $('#checkoutcalc').html("<span style='float: left;'>Shopping cart: </span>&euro; "+carttotal);
    }

    var checkouttotal = carttotal;
    $('input[price]:checked').each( function() {
        var price = parseFloat($(this).attr('price')).toFixed(2);
        var description = $(this).attr('description');
        $('#checkoutcalc').html($('#checkoutcalc').html() + "<br /><span style='float: left;'>"+description+": </span>&euro; "+price); 
        checkouttotal = (parseFloat(checkouttotal) + parseFloat(price)).toFixed(2);
    });
    $('#checkouttotal').remove();
    $('body').append('<input id="checkouttotal" type="hidden" value="'+checkouttotal+'" />');
    if(carttotal != checkouttotal) {
        $('#checkoutcalc').html($('#checkoutcalc').html() + "<div style='border-top: 1px solid #aaa; padding-top: 2px; margin-top: 3px;'><span style='float: left;'>Payment total: </span>&euro; "+checkouttotal+"</div>"); 
    }

    if(getParameterByName('paymentlink')) {
        $('#checkoutform').append($('#checkouttotal'));
    }
});


$( document ).ready(function() {
    updatecart();
    $('form').change();
});
</script>
        
    </body>
</html>