<style type="text/css">
    img.d-block {
        width: 100%;
        height: 500px;
        object-fit: cover;
        object-position: center;
    }
</style>

{% assign images ="" %}

<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        {% for post in site.posts %}
        {% if post.featured == true %}
        {% if forloop.first == true %}
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        {% else %}
        <li data-target="#carouselExampleIndicators" data-slide-to="{{ forloop.index0 }}"></li>
        {% endif %}
        {% endif %}
        {% endfor %}
    </ol>

    <div class="carousel-inner">

        {% for post in site.posts %}
        {% if post.featured == true %}
        {% if forloop.first == true %}

        <div class="carousel-item active">
        {% else %}
        <div class="carousel-item">
        {% endif %}
            <a href="{{ site.baseurl }}{{ post.url }}">
                <div class="carousel-caption d-none d-md-block">
                    <h5>{{ post.title }}</h5>
                    <p>{{ post.excerpt | strip_html | truncatewords:25 }}</p>
                </div>
                {% if jekyll.environment == 'production' %}

                <img
                    src="https://res.cloudinary.com/judsonlmoore-com/image/fetch/c_fill,f_auto,q_auto,g_auto:classic,w_800/{{ site.url }}{{ site.image-path }}{{ post.image }}"
                    class="d-block w-100 prod"
                    loading="{{ include.loading }}"
                    alt="{{ post.title }}"
                    crossorigin="anonymous"
                    srcset="
                        https://res.cloudinary.com/judsonlmoore-com/image/fetch/c_fill,f_auto,q_auto,g_auto:classic,w_320/{{ site.url }}{{ site.image-path }}{{ post.image }} 320w, 
                        https://res.cloudinary.com/judsonlmoore-com/image/fetch/c_fill,f_auto,q_auto,g_auto:classic,w_540/{{ site.url }}{{ site.image-path }}{{ post.image }} 540w, 
                        https://res.cloudinary.com/judsonlmoore-com/image/fetch/c_fill,f_auto,q_auto,g_auto:classic,w_758/{{ site.url }}{{ site.image-path }}{{ post.image }} 758w, 
                        https://res.cloudinary.com/judsonlmoore-com/image/fetch/c_fill,f_auto,q_auto,g_auto:classic,w_800/{{ site.url }}{{ site.image-path }}{{ post.image }} 800w, 
                    "
                />

                {% else %}

                <img 
                    src="{{ site. url }}{{ site.image-path }}{{ post.image }}" 
                    class="d-block w-100 non-prod" 
                    alt="{{ post.title }}"
                >

                {% endif %}

            </a>
        </div>
        {% endif %}
        {% endfor %}

    </div>
    <!--
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
    -->
</div>